<Resource>
  <Instance name="MainWindowResource">
    <Instance ref.Class="demo::MainWindow" xmlns:demo="demo::*">
      <ref.Members>
        <![CDATA[
          @cpp:Private
          static func CreateCircleAnimation(container: GuiBoundsComposition*, ball: GuiBoundsComposition*): IGuiAnimation^
          {
            return IGuiAnimation::CreateAnimation(
              func (time: UInt64): void
              {
                var angle = (cast int time) * Math::Pi() * 2;
                var sin = Math::Sin(angle);
                var cos = Math::Cos(angle);
                
                var cx = (container.Bounds.x2 - container.Bounds.x1) / 2;
                var cy = (container.Bounds.y2 - container.Bounds.y1) / 2;
                var radiusBall = (ball.Bounds.x2 - ball.Bounds.x1) / 2;
                var radiusOrbit = Math::Min(cx, cy) - radiusBall;
                
                var x = cast int Math::Round(cos * radiusOrbit + cx);
                var y = cast int Math::Round(sin * radiusOrbit + cx);
                ball.AlignmentToParent = {left:(x - radiusBall) top:(y - radiusBall) right:-1 bottom:-1};
              }, cast UInt64 1600);
          }
          
          @cpp:Private
          static func WaitingAnimation(container: GuiBoundsComposition*, ball: GuiBoundsComposition*): IGuiAnimation^
          ${
            while (true)
            {
              $PlayAndWait CreateCircleAnimation(container, ball);
            }
          }
        ]]>
      </ref.Members>
      <ref.Ctor>
        <![CDATA[
          {
            self.AddAnimation(WaitingAnimation(animationBackground, animationBall));
          }
        ]]>
      </ref.Ctor>
      <Window ref.Name="self" Text="GacUI XML资源临时测试" ClientSize="x:640 y:480">
        <att.BoundsComposition-set PreferredMinSize="x:640 y:480"/>

        <Tab>
          <att.BoundsComposition-set AlignmentToParent="left:5 top:5 right:5 bottom:5"/>

          <att.Pages>
            <TabPage Text="Complex Animation">
              <BoundsComposition ref.Name="animationBackground" AlignmentToParent="left:10 top:10 right:-1 bottom:-1" PreferredMinSize="x:200 y:200">
                <SolidBackground Color="#FFC929"/>
                <BoundsComposition ref.Name="animationBall" PreferredMinSize="x:16 y:16">
                  <SolidBackground Shape="shapeType:Ellipse" Color="#3F48CC"/>
                </BoundsComposition>
              </BoundsComposition>
            </TabPage>

            <TabPage Text="Gradient Animation">
            </TabPage>
          </att.Pages>
        </Tab>
      </Window>
    </Instance>
  </Instance>
</Resource>